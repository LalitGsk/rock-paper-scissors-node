script(src='/socket.io/socket.io.js')
script(src='http://code.jquery.com/jquery-latest.js')
script
  var socket = io.connect();
    $(function() {
      //When the player joins, the script will first see if a game is available
      //If now game is available, create a new game
      socket.emit('initial', '#{session.username}')
      
      //When we get a message from the server, we will interpret it and provide
      //the relevant information to the player
      socket.on('wait', function(msg) {
        $('#player1name').html('#{session.username}')
        $('#gamestatus').html(msg.data)
        $('#player1choice').html('')
        $('#player2choice').html('')
        $('#player2name').html('')
      });
      socket.on('join', function(msg) {
        $('#player1name').html(msg.data.player1name)
        $('#player2name').html(msg.data.player2name)
      });
      socket.on('timer', function(msg) {
        $('#timersection').html(msg.data)
      });
      socket.on('gamestatus', function(msg) {
        $('#gamestatus').html(msg.data)
      });
      socket.on('results', function(msg) {
        $('#gamecontrols').hide();
        $('#playagain').show();
        $('#player1choice').html('<img src="/images/'+msg.data.player1choice+'.png" alt="'+msg.data.player1choice+'"/>')
        $('#player2choice').html('<img src="/images/'+msg.data.player2choice+'.png" alt="'+msg.data.player2choice+'"/>')
      });
      socket.on('choose', function(msg) {
        $('#gamecontrols').show();
      });

      //Button Clicks
      $('#rock').click(function() {
        socket.emit('choice',{ 'data': 'rock'});
      });
      $('#paper').click(function() {
        socket.emit('choice',{ 'data': 'paper'});
      });
      $('#scissors').click(function() {
        socket.emit('choice',{ 'data': 'scissors'});
      });
      $('#playagain').click(function() {
        socket.emit('initial',{ 'data': '#{session.username}'});
        $('#player1choice').html('')
        $('#player2choice').html('')
        $('#playagain').hide();
      });
    });
h1= title
h2
  #timersection
h3
  #gamestatus
#gamearea
  #player1
    h3 
      span#player1name
    p
      span#player1choice
  #player2
    h3
      span#player2name
    p 
      span#player2choice
  p#gamecontrols(style='display: none;')
    input(type='button', name='rock', id='rock', value='ROCK!')
    input(type='button', name='paper', id='paper', value='PAPER!')
    input(type='button', name='scissors', id='scissors', value='SCISSORS!')
  p#playagain(style='display: none;')
    input(type='button', name='playagain', id='playagain', value='Play Again?')

