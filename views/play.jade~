script(src='/socket.io/socket.io.js')
script(src='http://code.jquery.com/jquery-latest.js')
script
  var socket = new io.Socket(); 
  socket.connect();
    $(function() {
      //When the player joins, the script will first see if a game is available
      //If now game is available, create a new game
      socket.send({'type': 'search', 'data': '#{session.username}'})
      
      //When we get a message from the server, we will interpret it and provide
      //the relevant information to the player
      socket.on('message', function(msg) {
        switch (msg.type) {
          //The player is asked to wait
          case 'wait':
            $('#player1name').html('#{session.username}')
            $('#gamestatus').html(msg.data)
            $('#player1choice').html('')
            $('#player2choice').html('')
            $('#player2name').html('')
            break;
          //When a player joins, a 'join' message is sent to both players
          //so that they can update their user interface with their opponent's
          //and the player's names. Then tells the server they're ready
          case 'join':
            $('#player1name').html(msg.data.player1name)
            $('#player2name').html(msg.data.player2name)
            break;
          //If a timer is sent, we will display this message in the #timersection
          case 'timer':
            $('#timersection').html(msg.data)
            break;
          //Game status informs the player what's going on in the game
          case 'gamestatus':
            $('#gamestatus').html(msg.data)
            break;
          //Game is over. Hide the controls. Show the replay button.
          case 'results':
            $('#gamecontrols').hide();
            $('#playagain').show();
            $('#player1choice').html('<img src="/images/'+msg.data.player1choice+'.png" alt="'+msg.data.player1choice+'"/>')
            $('#player2choice').html('<img src="/images/'+msg.data.player2choice+'.png" alt="'+msg.data.player2choice+'"/>')
        }
        switch (msg.data) {
          case 'Choose your play!':
            $('#gamecontrols').show();
            break;
          default:
            break;
        }
      });
      //Button Clicks
      $('#rock').click(function() {
        socket.send({'type': 'choice', 'data': 'rock'});
      });
      $('#paper').click(function() {
        socket.send({'type': 'choice', 'data': 'paper'});
      });
      $('#scissors').click(function() {
        socket.send({'type': 'choice', 'data': 'scissors'});
      });
      $('#playagain').click(function() {
        socket.send({'type': 'search', 'data': '#{session.username}'});
        $('#playagain').hide();
      });
    });
h1= title
h2
  #timersection
h3
  #gamestatus
#gamearea
  #player1
    h3 
      span#player1name
    p
      span#player1choice
  #player2
    h3
      span#player2name
    p 
      span#player2choice
  p#gamecontrols(style='display: none;')
    input(type='button', name='rock', id='rock', value='ROCK!')
    input(type='button', name='paper', id='paper', value='PAPER!')
    input(type='button', name='scissors', id='scissors', value='SCISSORS!')
  p#playagain(style='display: none;')
    input(type='button', name='playagain', id='playagain', value='Play Again?')
